---
layout: post
title:  "UbuntuLinux7.04FeistyFawn安装配置全记录（w/Beryl/Aiglx桌面效果）［转］"
date:   2007-06-06 12:48:51
categories: 默认分类
tags:
---

* content
{:toc}

from : http://forum.ubuntu.org.cn/viewtopic.php?t=49864一、前言： 本文是“Ubuntu全程安装配置手册（适合略有Linux经验，又没有使用过Ubuntu的Linuxer）”的Feisty版。虽然标题中有“安装” 字样，但是文中却并没有涉及安装的详细，请原谅。本文匆匆写就，文中有很多不尽准确之处，会在后面慢慢寻找解决方法。也请大家多多指正。 二、安装： 过程不详细讲述了，请参考Ubuntu 6.06 Dapper和Ubuntu 6.10 Edgy的安装指南。 三、基本配置： 在进行下面的配置之前请确保你有可用的Internet连接。 1. 添加源：         代码:    sudo cp /etc/apt/sources.list /etc/apt/sources.list_backup sudo gedit /etc/apt/sources.list 以下源是直接从Edgy的源修改过来的，可能某些源已经不能用了，所以请自行寻找合适的源，教育网用户可以使用上海交通大学的源，速度非常好。有时，国外的源的速度不一定会比国内的源慢，你可以多测试几个源，使用速度最快的那个。如果找到的是Edgy的源，直接把源中的edgy改成feisty就可以了。当前可能有部分源还没有和主站完成同步，所以可能导致部分升级镜像不能使用，但是这种情况很快（通常不超过一周）就会改观的。 添加下面的任意一组（请根据你的实际连线速度决定）：         代码:    Ubuntu.cn99.com 更新服务器(江苏省常州市电信，推荐电信用户使用。）： deb http://ubuntu.cn99.com/ubuntu/ feisty main restricted universe multiverse deb http://ubuntu.cn99.com/ubuntu/ feisty-updates main restricted universe multiverse deb http://ubuntu.cn99.com/ubuntu/ feisty-security main restricted universe multiverse deb http://ubuntu.cn99.com/ubuntu/ feisty-backports main restricted universe multiverse deb http://ubuntu.cn99.com/ubuntu/ feisty-proposed main multiverse restricted universe deb http://ubuntu.cn99.com/ubuntu-cn/ feisty main restricted universe multiverse Mirror.lupaworld.com 更新服务器(浙江省杭州市电信，推荐电信用户使用。）： deb http://mirror.lupaworld.com/ubuntu/archive/ feisty main restricted universe multiverse deb http://mirror.lupaworld.com/ubuntu/archive/ feisty-security main restricted universe multiverse deb http://mirror.lupaworld.com/ubuntu/archive/ feisty-updates main restricted universe multiverse deb http://mirror.lupaworld.com/ubuntu/archive/ feisty-backports main restricted universe multiverse deb http://mirror.lupaworld.com/ubuntu/archive/ feisty-proposed main restricted universe multiverse deb http://mirror.lupaworld.com/ubuntu/ubuntu-cn/ feisty main restricted universe multiverse 上海市交通大学 更新服务器（教育网，推荐校园网和网通用户使用。）： deb http://ftp.sjtu.edu.cn/ubuntu/ feisty main multiverse restricted universe deb http://ftp.sjtu.edu.cn/ubuntu/ feisty-backports main multiverse restricted universe deb http://ftp.sjtu.edu.cn/ubuntu/ feisty-proposed main multiverse restricted universe deb http://ftp.sjtu.edu.cn/ubuntu/ feisty-security main multiverse restricted universe deb http://ftp.sjtu.edu.cn/ubuntu/ feisty-updates main multiverse restricted universe deb http://ftp.sjtu.edu.cn/ubuntu-cn/ feisty main multiverse restricted universe 北京市清华大学 更新服务器（教育网，推荐校园网和网通用户使用。)： deb http://mirror.net9.org/ubuntu/ feisty main multiverse restricted universe deb http://mirror.net9.org/ubuntu/ feisty-backports main multiverse restricted universe deb http://mirror.net9.org/ubuntu/ feisty-proposed main multiverse restricted universe deb http://mirror.net9.org/ubuntu/ feisty-security main multiverse restricted universe deb http://mirror.net9.org/ubuntu/ feisty-updates main multiverse restricted universe deb http://mirror.net9.org/ubuntu-cn/ feisty main multiverse restricted universe Mirror.vmmatrix.net 更新服务器（上海市电信，推荐电信网通用户使用。）: deb http://mirror.vmmatrix.net/ubuntu/ feisty main restricted universe multiverse deb-src http://mirror.vmmatrix.net/ubuntu/ feisty main restricted universe multiverse deb http://mirror.vmmatrix.net/ubuntu/ feisty-updates main restricted universe multiverse deb-src http://mirror.vmmatrix.net/ubuntu/ feisty-updates main restricted universe multiverse deb http://mirror.vmmatrix.net/ubuntu/ feisty-backports main restricted universe multiverse deb-src http://mirror.vmmatrix.net/ubuntu/ feisty-backports main restricted universe multiverse deb http://mirror.vmmatrix.net/ubuntu/ feisty-security main restricted universe multiverse deb-src http://mirror.vmmatrix.net/ubuntu/ feisty-security main restricted universe multiverse deb http://ftp.sjtu.edu.cn/ubuntu-cn/ feisty main multiverse restricted universe 2. 更新软件包信息：         代码:    sudo apt-get update sudo apt-get dist-upgrade 升级系统可能会花上一段时间（目前还不会花很多时间），你可以利用这个时间调整一下桌面，把计算机、主文件夹、回收站放到桌面上，把挂载的卷去掉：         代码:    gconf-editor 到/apps/nautilus/desktop/分支下，去掉volumes_visible前面的复选框，勾上trash_icon_visible，home_icon_visible，computer_icon_visible前面的复选框。 升级完毕，继续进行后面的步骤。 3. 安装中文语言支持： “System” - “系统管理” - “语言支持”，在对话框的下拉列表中勾选“English”和“Chinese”，默认语言选择“Chinese”，这样就能得到中文界面了。点击“确定”或“应用”系统就开始自动下载语言支持的包，下次注销后重新登录，系统语言就变成中文了，输入法也能用了。到时，记得稍微调整一下Scim的设置，因为Feisty在Scim默认加入了n多输入法，其中绝大多数都可以去掉。 4. 配置字体：         代码:    sudo fontconfig-voodoo -f -s zh_CN 5. 安装文泉驿字体：         代码:    sudo apt-get install xfonts-wqy 这步只是给不喜欢黑体的人准备的。如果你喜欢Mac风格的黑体字，下面会介绍将你的系统字体配置成黑体的方法。Anyway，就算你喜欢黑体，建议你也装一下。 6. 安装Java环境： 建议安装JDK，反正也不比JRE多用很多空间。         代码:    sudo apt-get install sun-java6-jdk 安装浏览器Java插件：         代码:    sudo apt-get install sun-java6-plugin 7. 安装LumaQQ： 尽管我现在已经完全不用LumaQQ了，但是相信还是有人需要这个。安装还是照搬Edgy中的方法，如下：   mkdir tmp;cd tmp wget -c http://download.ubuntu.org.cn/software/lumaqq_2005-linux_gtk2_x86_no_jre.tar.gz sudo tar zxvf lumaqq_2005-linux_gtk2_x86_no_jre.tar.gz -C /opt/ wget -c http://download.ubuntu.org.cn/software/lumaqq_2005_patch_2006.02.02.15.00.zip sudo unzip -o lumaqq_2005_patch_2006.02.02.15.00.zip -d /opt/LumaQQ/lib sudo chown -R root:root /opt/LumaQQ/ sudo chmod -R 755 /opt/LumaQQ/ sudo gedit /usr/share/applications/LumaQQ.desktop   添加如下行：         代码:    [Desktop Entry] Comment=QQ Client Exec=/opt/LumaQQ/lumaqq Icon=/opt/LumaQQ/QQ.png Terminal=false Type=Application Categories=Application;Network; 你可以在“应用程序” - “Internet” - “LumaQQ”打开LumaQQ 8. 安装播放器： 你可以自行选择你喜欢的播放器，下面只是推荐使用的播放器：         代码:    sudo apt-get install totem-xine w32codecs libxine-extracodecs mplayer (如w32codecs无法下载，请看本文最后的说明，要正确安装程序，请暂时从上面的行中删除w32codecs) 9. 安装StarDict：         代码:    sudo apt-get install stardict stardict-common sudo apt-get install stardict-cdict-gb stardict-cedict-gb stardict-hanzim stardict-langdao-ce-gb stardict-langdao-ec-gb stardict-oxford-gb stardict-xdict-ce-gb stardict-xdict-ec-gb(看本文最后的说明) 10. 安装浏览器Flash插件：         代码:    sudo mkdir -p /usr/lib/X11/fonts/Type1 sudo apt-get install flashplugin-nonfree 11. 安装Downloader for X，BT和aMule         代码:    sudo apt-get install d4x azureus amule 12. 配置alsa（如果你出现声卡独占现象，请执行这步）：         代码:    sudo apt-get install alsa-oss sudo gedit /etc/asound.conf 添加如下内容：   type hw   card 0 } pcm.!default {   type plug   slave.pcm "dmixer" } pcm.dmixer {   type dmix   ipc_key 1025   slave {     pcm "hw:0,0"     period_time 0     period_size 1024     buffer_size 4096     periods 128     rate 44100   }   bindings {     0 0     1 1   } }   修改ESD配置文件：         代码:    sudo gedit /etc/esound/esd.conf 改成如下：         代码:    [esd] auto_spawn=1 spawn_options=-terminate -nobeeps -as 2 -d default spawn_wait_ms=100 # default options are used in spawned and non-spawned mode default_options= 如果LumaQQ独占声卡，可以编辑/usr/share/applications/LumaQQ.desktop，修改Exec＝/opt/LumaQQ/lumaqq 为 Exec＝aoss /opt/LumaQQ/lumaqq 18. 配置字体（两种方法任选）： （方法一、黑体） 下载sthei.ttf.gz（到这里下载，在"Linux"目录下）         代码:    sudo apt-get install msttcorefonts gunzip sthei.ttf.gz sudo mkdir -p /usr/share/fonts/cn sudo mv sthei.ttf /usr/share/fonts/cn sudo chown -R root:root /usr/share/fonts/cn/ sudo chmod -R 755 /usr/share/fonts/cn/ sudo fc-cache 设置黑体为系统首选中文字体：   family>DejaVu Serif</family>，<family>DejaVu Sans</family>，<family>DejaVu Sans Mono</family>行下面都添加：     family>STHeiti</family>   保存，退出。 “系统” - “首选项” - “字体”： 在“字体渲染”中，选择“细节”，“平滑”设置为“灰度”“微调”设置为“无”。 打开firefox，设置firefox字体（编辑 - 首选项 - 内容 - 字体和颜色部分，选择“高级”）： 语言编码：简体中文 比例字体：无衬线字体 大小：16 衬线字体：DejaVu Serif 或 Bitstream Vesa Serif 无衬线字体：DejaVu Sans 或 Bitstream Vesa Sans 等宽字体：DejaVu Sans Mono或 Bitstream Vesa Sans Mono 大小：16 屏幕解析度：96dpi 最小字体：11 （选中）允许页面选择显示字体而无需使用上面的配置 默认字符编码：UTF-8 OK,注销后登录（或重启），你就会发现字体已经变成黑体了。 （方法二、点阵字体，文泉驿字体） 假如你不喜欢AA过黑体，而喜欢轮廓分明的点阵字体，你可以使用文泉驿字体。大致方法和上面一样： 系统 -首选项 - 字体： 设置所有非等宽字体为WenQuanYi Bitmap Song 10号，其中窗口标题字体设置为粗体。 等宽字体设置为Courier 10 Pitch，因为Courier 10 Pitch比Courier New字体更清楚。 为了避免英文字体变得毛躁，所以还是保持英文字体的AA是打开的，所以字体渲染部分设置保持默认。 Firefox中，可以这样设置： 语言编码：简体中文 比例字体：无衬线字体 大小：16 衬线字体：Times New Roman 无衬线字体：WenQuanYi Bitmap Song 等宽字体：Courier 10 Pitch 大小：16 屏幕解析度：96dpi 最小字体：11 （选中）允许页面选择显示字体而无需使用上面的配置 默认字符编码：UTF-8 OK,注销后登录（或重启），你就会发现字体已经变成文泉驿字体了。现在文泉驿字体的中英文都很好看。 19. 安装NTFS读写支持         代码:    sudo apt-get install ntfs-config 点击“应用程序” - “系统工具” - “NTFS写入支持配置程序” 输入密码，选中对内部设备的读写支持，和外部设备的读写支持，系统会自动扫描你硬盘上的NTFS分区，并重新挂载，这样，你的NTFS分区就能在Feisty下完美读写了！ 四、 Hello Beryl/Aiglx! 在Feisty上配置Beryl/Aiglx可省心多了，因为Feisty已经集成了Aiglx和显卡的通用3D开源驱动DRI，并默认集成了 compiz，所以假如你能开启桌面特效（“系统” - “首选项” - “桌面效果”），就说明你的显卡驱动没有问题了。具体需要什么显卡实在很难说，大致A卡Radeon 7000以上应该就可以了，较新的显卡可能需要使用ATI官方的驱动，请自行解决驱动问题——因为条件限制，我也没有办法帮你们解决。(NV显卡类似，大致GeForce MX400以上显卡就可以了。) 不过，你可以使用下面的方法验证你的显卡的3D加速是不是已经打开：         代码:    glxinfo|grep "direct rendering" 如果你看到：         代码:    direct rendering: Yes 恭喜你，你可以进行下面的配置，安装Beryl了！ 1. 添加源:         代码:    sudo gedit /etc/apt/sources.list 添加：         代码:    deb http://ubuntu.beryl-project.org/ feisty main 保存，退出。 2. 导入数字签名:         代码:    wget http://ubuntu.beryl-project.org/root@lupine.me.uk.gpg -O- | sudo apt-key add - 3. 升级:         代码:    sudo apt-get update sudo apt-get dist-upgrade 4. 安装Beryl:         代码:    sudo apt-get install beryl beryl-manager sudo apt-get install emerald-themes 5. 登录时加载Beryl: 打开菜单：“系统”－“首选项”－“会话” 在“会话”对话框中打开“启动程序”标签。点击“新建”，输入： 名称：Beryl Manager，命令：beryl-manager 至此，你差不多已经完成了。注销后登录，你就可以看到漂亮的Beryl 0.21已经在运行了。默认的主题不好看，也许你应该考虑换一个主题，或者去 beryl-project.org 下载更多的主题，并对beryl的n多设置小小的摸索一番。 五、一些琐碎 a. 在右键菜单中加入打开终端:         代码:    sudo apt-get install nautilus-open-terminal b. 系统服务管理软件:         代码:    sudo apt-get install bum c. 修改GrubSplash: 到http://www.gnome-look.org下载一个喜欢的grub splash，重命名为splash.xpm.gz         代码:    mv splash.xpm.gz /boot/grub/ 修改你的/boot/grub/menu.lst，在操作系统选择部分前面添加一行：         代码:    splashimage=(hd0,x)/boot/grub/splash.xpm.gz d. 修改root用户密码:         代码:    sudo passwd root e. 安装rar支持:         代码:    sudo apt-get install rar unrar f. 安装vim，以让它成为我们熟悉的vim，而不是vi。         代码:    sudo apt-get install vim-full g. 得到块设备的UUID：         代码:    $ sudo vol_id -u /dev/sdaX 剩下的就靠你自己慢慢摸索了。祝你顺利。 六、小结: Feisty在Edgy的基础上变化不是很多，易用性和运行速度有所改观。因为本文基本上是照搬我写的Edgy版的配置文章，所以可能有些方法有点不太好，我也会在后面看大家的反馈后对本文进行修正。 七、已知问题： 下面的一些问题可能不存在于你的系统上，我罗列从我的机器中发现的问题。 1. 注销后重新登录会出现程序加载变慢等现象。重新注销后登录或重启后即恢复正常； 2. 我的硬盘都变成sda了，晕！（我的硬盘一直是hda的说） 八、 你必须知道的Feisty的进步： 1. 改进了Live CD方式安装的安装程序，简化了硬盘分区操作，并添加了从Windows系统导入数据文件和配置的选项； 2. 增加了从Alternative CD方式升级的升级程序，使得升级变得更加简单，图形界面方式的发行版升级变得更加简单； 3. 对很多显卡默认安装了DRI驱动，并默认开启了3D加速支持，并集成了compiz； 4. 超级简单的NTFS读写支持，这一方面要归功于NTFS-3G的强悍，另一方面，Feisty的自动设置工具使得NTFS读写支持变得非常容易，你甚至无须修改语言支持，就能得到良好的中文语言支持！ 5. menu.lst里面也开始使用uuid来代替块设备文件名； 6. Gnome 2.18确实比Gnome 2.16快了些； 7. 还有更多进步等待发现... 总的来说，要使用Ubuntu，你需要了解的命令是越来越少了，安装，配置和维护变得非常简单和省心，特别适合新手和懒人。 最终效果： 说明：因为目前ubuntu-cn的Feisty镜像多未能完全同步，部分软件包可能无法正确下载到，如w32codecs和Stardict的字典文件。目前的临时解决方案如下，请在使用上文中提到的方法无效后才使用下面的方法： a. 添加源         代码:    sudo gedit /etc/apt/sources.list 添加：   ＃也就是edgy的ubuntu-cn的源，你可以添加其他中文镜像的ubuntu-cn的源  保存，退出。 b. 安装w32codecs         代码:    sudo apt-get install w32codecs c. 安装字典         代码:    sudo apt-get install stardict-cdict-gb stardict-cedict-gb stardict-hanzim stardict-langdao-ce-gb stardict-langdao-ec-gb stardict-oxford-gb stardict-xdict-ce-gb stardict-xdict-ec-gb 完成后记得重新修改sources.list，将刚才添加的行用"#"注释掉，并重新apt-get update一下。 原则上，不要混用不同发行版的安装源，鉴于Stardict的字典文件和w32codecs与系统底层关系不大，所以可以采用上面的临时解决方案。
        
